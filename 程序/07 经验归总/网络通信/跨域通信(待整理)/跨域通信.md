# 跨域通信

## 域名结构

- 顶级域名
- 二级域名
- 三级域名

## 同源策略

浏览器限制**从脚本**发起的跨域请求，对于不符合同源策略的请求将进行拦截

- 同域名
- 同协议
- 同端口

说明：浏览器并不会阻止发送请求，而是会对接受的请求进行限制

## 跨域请求

- 后端请求
- JSONP
- postMessage
- CORS

### 跨域资源共享（CORS）

跨域资源共享机制允许 web 应用服务器进行跨域访问控制

CORS 在 HTTP 首部添加了一组字段，允许服务器声明哪些源站通过浏览器有权限访问哪些资源

流程

- 对于 GET 之外的 HTTP 请求将先使用 OPTIONS 方法发起一个预检请求，服务器确认允许之后才发起实际的 HTTP 请求
- 预检请求返回中，服务端可通知客户端是否需要携带身份凭证

Access-Control-Allow-Origin: <origin> | _
Access-Control-Expose-Headers: <header-field>
Access-Control-Max-Age: <delta-seconds>
Access-Control-Allow-Credentials: true
Access-Control-Allow-Methods: <method>[, <method>]_
Access-Control-Allow-Headers: <field-name>[, <field-name>]\*
