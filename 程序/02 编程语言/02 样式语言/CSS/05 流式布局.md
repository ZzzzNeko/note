# 流式布局

## BFC

BFC: 块级格式化上下文，BFC 的子元素不会影响外部元素 <br>
符合以下条件之一即可创建 BFC

- 根元素(html)
- 浮动元素
- 绝对定位
- 行内块级元素
- 表格、表格标题、表格单元格元素
- overflow 非 visible 的块级元素
- 弹性元素
- 网格元素
- 多列容器

利用 BFC 的特点清除浮动带来的影响，最常用的 overflow: hidden

```html
<style>
  .wrap {
    border: 1px solid;
  }
  .box {
    width: 500px;
    height: 100px;
    border: 1px solid;
    margin: 20px;
  }
  .left {
    float: left;
  }
  .bfc {
    overflow: hidden;
  }
</style>
<div class="wrap">
  <div class="box left"></div>
  <p class="bfc">
    阿巴阿巴阿巴阿巴阿巴阿巴阿巴阿巴 阿巴阿巴阿巴阿巴阿巴阿巴阿巴阿巴
  </p>
</div>
```

## IFC

IFC: 内联格式化上下文

- 如何创建
  - 内联元素
  - 文本元素
- 表现特点
  - 块方向上对齐：`vertical-align`
  - 行内方向上对齐：`text-align`

## 浮动

浮动的本质是为了实现文字环绕的效果

主要特性

- 包裹性/自适应：未设置宽度的浮动元素宽度为内容宽度，且不超过父元素宽度
- 块状化并格式化上下文：浮动元素 display 转换为 block 或 table
- 破坏文档流
- 无 margin 合并

clear: both (left/right 本质上只有一种情况生效)

- 作用于块级元素，让当前元素不受前一个 float 元素影响(不会改变 float 元素本身)
- left/right 对应前一个 float 元素的浮动方向，使用 both 可以免去判断

```css
/* 容器内若存在浮动元素，添加一个块级元素(通常使用伪元素)并指定 clear: both 即可 */
.clear::after {
  content: "";
  display: block;
  clear: both;
}
```

## 锚点定位

锚点定位时，会对定位目标所在容器进行滚动；说明 overflow: hidden 实际是隐藏了滚动条并禁用了默认的滚动事件，但仍可以控制其滚动距离；利用改特性可以手动监听 wheel 事件模拟滚动效果，隐藏滚动条

```html
<style>
  .links {
    display: flex;
  }
  .links > a {
    margin: 30px;
  }
  .wrap {
    /* overflow: auto; */
    overflow: hidden;
    height: 500px;
  }
  .wrap > .rect {
    display: block;
    height: 500px;
    width: 200px;
    border: 1px solid;
  }
</style>
<div class="links">
  <a href="#a">a</a>
  <a href="#b">b</a>
  <a href="#c">c</a>
</div>
<div class="wrap" id="wrap">
  <a class="rect" name="a">a</a>
  <a class="rect" name="b">b</a>
  <a class="rect" name="c">c</a>
</div>
<script>
  const wrap = document.getElementById("wrap");
  wrap.addEventListener("wheel", event => {
    console.log(event);
    wrap.scrollTop += event.deltaY;
  });
</script>
```

## 绝对定位

特性

- 包裹性/自适应
- BFC，浮动元素 display 转换为 block 或 table
- 破坏文档流

```html
<!-- 绝对定位元素宽高百分比相对其定位参照元素(包含块) -->
<!-- 不指定宽度时呈现包裹性和自适应 -->
<style>
  .wrap {
    position: relative;
    height: 200px;
  }
  .box {
    position: absolute;
    height: 50%;
    border: 1px solid;
  }
</style>
<div class="wrap">
  <div class="box">阿萨</div>
</div>
```

包含块：元素用来计算和定位的框

- 初始包含块：根元素(html)
