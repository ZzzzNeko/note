# 模块与包

## 模块

一个文件就是一个模块

### 导入

语法

- 导入模块 `import moduleName` 使用时需要时候模块名
- `moduleName` 默认在根据当前目录进行寻找，
- 可以对模块重命名 `import moduleName as newName`
- 导入模块指定内容 `from moduleName import mdFn1, mdFn2`
- 导入内容并重命名 `from moduleName import mdFn1 as fn1`
- 导入模块全部内容 `from moduleName import *` 会导入所有非下划线开头的名称，**不建议使用**
- 可以根据 `__name__` 获取当前模块的名称，`moduleName.__name__` 获取导入模块的名称
- 同一模块多次导入时只加载一次，可以手动进行重载

  ```py
  import importlib
  import mymodule
  import othermodule as other

  importlib.reload(mymodule)
  importlib.reload(other)
  ```

路径(按照以下顺序查找)

1. 输入脚本的目录
2. `PYTHONPATH` (目录列表)
3. 依赖安装的默认位置

命令行参数

- `py myModule.py <arguments>`
- 可以通过 `import sys` 中的 `sys.argv` 获取参数, `sys.path` 获取路径
- `sys.argv[0]` 为文件名称, `sys.argv[1:]` 为传入参数

缓存

- 已经执行过的模块会创建一个 `__pycache__` 目录，将模块缓存在 `[module].[version].pyc` 中
- `.pyc` 文件对比 `.py` 文件加载速度更快，单并不提升执行速度
- python 会对比模块的修改时间判断是否需要重新编译缓存
- 命令行导入的模块与 发行版本模块(已编译的，无源文件) 没有缓存

### `dir()`

内置函数 `dir()` 用于查找模块定义的名称

- `dir(moduleName)`: 列出指定模块中定义的名称
- `dir()`: 列出当前模块中定义的名称
- `dir(builtins)`: 列出内置函数的名称(需要先导入 `import builtins`)

```py
import myUtil
utils = dir(myUtil)
print(utlils)
```

## 包

包由多个模块或子包组成

- 包文件夹包含一个 `__init__.py` 文件，内容可空，可配置 `__all__` 和 `__path__` 属性
  - `__all__` 属性可以设置导入包时加载的子模块
  - `__path__` 属性可以设置 `__init__.py` 执行前所在的目录名列表
- 导入的内容可以是包，子包，模块，模块内容

```py
# /myPkg/__init__.py
__all__ = ['util', 'text']

# someModule.py
from myPkg import * # 此时已导入 util 和 text 模块
```

相对位置

- `from . import xxmd` 相对于当前包
- `from .. import xxmd` 相对于当前包的父包
- `from ..xx import xxmd` 相对于当前包的兄弟包
