import{_ as s,o as l,c as a,V as n}from"./chunks/framework.3b22bc79.js";const F=JSON.parse('{"title":"域名系统","description":"","frontmatter":{},"headers":[],"relativePath":"程序/网络通信/网络模型/应用层 - DNS.md","filePath":"程序/网络通信/网络模型/应用层 - DNS.md","lastUpdated":1687878294000}'),t={name:"程序/网络通信/网络模型/应用层 - DNS.md"},o=n(`<h1 id="域名系统" tabindex="-1">域名系统 <a class="header-anchor" href="#域名系统" aria-label="Permalink to &quot;域名系统&quot;">​</a></h1><p>域名系统(Domain Name System，DNS)，是将域名与 IP 地址相互映射的分布式数据库 <br> DNS 运行在应用层上，基于 UDP 协议，默认端口 53</p><h2 id="域名层级" tabindex="-1">域名层级 <a class="header-anchor" href="#域名层级" aria-label="Permalink to &quot;域名层级&quot;">​</a></h2><ul><li>根域名：最高一级的域名节点，管理顶级域名(可在顶级域名后添加 &#39;.&#39;，但一般不写)</li><li>顶级域名(一级域名) <ul><li>国际顶级域名：表示注册人类别和功能 <ul><li>.com：表示工商企业</li><li>.net：表示网络提供商</li><li>.rog：表示非营利组织</li></ul></li><li>国家顶级域名：表示注册地理或国家，个人不能随意申请(如 .cn，)</li></ul></li><li>二级域名 <ul><li>国际顶级域名下：注册人指定的域名</li><li>国家顶级域名下：表示注册人类别和功能(如 .com.cn)</li></ul></li><li>三级域名：作为二级域名的子域名，无需单独申请</li></ul><p>一个完整的域名至少包含顶级域名与二级域名</p><h2 id="域名解析" tabindex="-1">域名解析 <a class="header-anchor" href="#域名解析" aria-label="Permalink to &quot;域名解析&quot;">​</a></h2><p>静态映射：通过本地查询各种缓存或配置进行查询</p><div class="language-mermaid"><button title="Copy Code" class="copy"></button><span class="lang">mermaid</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;font-style:italic;">graph</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">LR</span></span>
<span class="line"><span style="color:#A6ACCD;">  A</span><span style="color:#89DDFF;font-style:italic;">[</span><span style="color:#C3E88D;">客户端</span><span style="color:#89DDFF;font-style:italic;">]</span></span>
<span class="line"><span style="color:#A6ACCD;">  B</span><span style="color:#89DDFF;font-style:italic;">[</span><span style="color:#C3E88D;">浏览器缓存</span><span style="color:#89DDFF;font-style:italic;">]</span></span>
<span class="line"><span style="color:#A6ACCD;">  C</span><span style="color:#89DDFF;font-style:italic;">[</span><span style="color:#C3E88D;">本地host</span><span style="color:#89DDFF;font-style:italic;">]</span></span>
<span class="line"><span style="color:#A6ACCD;">  D</span><span style="color:#89DDFF;font-style:italic;">[</span><span style="color:#C3E88D;">本地DNS解析器缓存</span><span style="color:#89DDFF;font-style:italic;">]</span></span>
<span class="line"><span style="color:#A6ACCD;">  E</span><span style="color:#89DDFF;font-style:italic;">[</span><span style="color:#C3E88D;">本地DNS服务器</span><span style="color:#89DDFF;font-style:italic;">]</span></span>
<span class="line"><span style="color:#A6ACCD;">  A </span><span style="color:#89DDFF;font-style:italic;">--&gt;</span><span style="color:#A6ACCD;"> B </span><span style="color:#89DDFF;font-style:italic;">-.-&gt;</span><span style="color:#A6ACCD;"> C </span><span style="color:#89DDFF;font-style:italic;">-.-&gt;</span><span style="color:#A6ACCD;"> D </span><span style="color:#89DDFF;font-style:italic;">-.-&gt;</span><span style="color:#A6ACCD;"> E</span></span>
<span class="line"><span style="color:#A6ACCD;">  B </span><span style="color:#89DDFF;font-style:italic;">-.-&gt;</span><span style="color:#A6ACCD;"> A</span></span>
<span class="line"><span style="color:#A6ACCD;">  C </span><span style="color:#89DDFF;font-style:italic;">-.-&gt;</span><span style="color:#A6ACCD;"> A</span></span>
<span class="line"><span style="color:#A6ACCD;">  D </span><span style="color:#89DDFF;font-style:italic;">-.-&gt;</span><span style="color:#A6ACCD;"> A</span></span>
<span class="line"><span style="color:#A6ACCD;">  E </span><span style="color:#89DDFF;font-style:italic;">-.-&gt;</span><span style="color:#A6ACCD;"> A</span></span></code></pre></div><p>动态映射：通过本地向其他域名服务器查询</p><div class="language-mermaid"><button title="Copy Code" class="copy"></button><span class="lang">mermaid</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;font-style:italic;">graph</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">LR</span></span>
<span class="line"><span style="color:#A6ACCD;">  A</span><span style="color:#89DDFF;font-style:italic;">[</span><span style="color:#C3E88D;">客户端</span><span style="color:#89DDFF;font-style:italic;">]</span></span>
<span class="line"><span style="color:#A6ACCD;">  B</span><span style="color:#89DDFF;font-style:italic;">[</span><span style="color:#C3E88D;">本地DNS服务器</span><span style="color:#89DDFF;font-style:italic;">]</span></span>
<span class="line"><span style="color:#A6ACCD;">  C</span><span style="color:#89DDFF;font-style:italic;">[</span><span style="color:#C3E88D;">根域名服务器</span><span style="color:#89DDFF;font-style:italic;">]</span></span>
<span class="line"><span style="color:#A6ACCD;">  D</span><span style="color:#89DDFF;font-style:italic;">[</span><span style="color:#C3E88D;">顶级域名服务器</span><span style="color:#89DDFF;font-style:italic;">]</span></span>
<span class="line"><span style="color:#A6ACCD;">  E</span><span style="color:#89DDFF;font-style:italic;">[</span><span style="color:#C3E88D;">权威域名服务器</span><span style="color:#89DDFF;font-style:italic;">]</span></span>
<span class="line"><span style="color:#A6ACCD;">  A </span><span style="color:#89DDFF;font-style:italic;">--</span><span style="color:#C3E88D;"> 1 </span><span style="color:#89DDFF;font-style:italic;">--&gt;</span><span style="color:#A6ACCD;"> B</span></span>
<span class="line"><span style="color:#A6ACCD;">  B </span><span style="color:#89DDFF;font-style:italic;">--</span><span style="color:#C3E88D;"> 8 </span><span style="color:#89DDFF;font-style:italic;">--&gt;</span><span style="color:#A6ACCD;"> A</span></span>
<span class="line"><span style="color:#A6ACCD;">  B </span><span style="color:#89DDFF;font-style:italic;">--</span><span style="color:#C3E88D;"> 2 </span><span style="color:#89DDFF;font-style:italic;">--&gt;</span><span style="color:#A6ACCD;"> C</span></span>
<span class="line"><span style="color:#A6ACCD;">  C </span><span style="color:#89DDFF;font-style:italic;">--</span><span style="color:#C3E88D;"> 3 </span><span style="color:#89DDFF;font-style:italic;">--&gt;</span><span style="color:#A6ACCD;"> B</span></span>
<span class="line"><span style="color:#A6ACCD;">  B </span><span style="color:#89DDFF;font-style:italic;">--</span><span style="color:#C3E88D;"> 4 </span><span style="color:#89DDFF;font-style:italic;">--&gt;</span><span style="color:#A6ACCD;"> D</span></span>
<span class="line"><span style="color:#A6ACCD;">  D </span><span style="color:#89DDFF;font-style:italic;">--</span><span style="color:#C3E88D;"> 5 </span><span style="color:#89DDFF;font-style:italic;">--&gt;</span><span style="color:#A6ACCD;"> B</span></span>
<span class="line"><span style="color:#A6ACCD;">  B </span><span style="color:#89DDFF;font-style:italic;">--</span><span style="color:#C3E88D;"> 6 </span><span style="color:#89DDFF;font-style:italic;">--&gt;</span><span style="color:#A6ACCD;"> E</span></span>
<span class="line"><span style="color:#A6ACCD;">  E </span><span style="color:#89DDFF;font-style:italic;">--</span><span style="color:#C3E88D;"> 7 </span><span style="color:#89DDFF;font-style:italic;">--&gt;</span><span style="color:#A6ACCD;"> B</span></span></code></pre></div><p>本地服务器查询是递归查询过程；客户端发出一次请求</p><p>本地 DNS 服务器向其他域名服务器为迭代查询过程；本地 DNS 服务器发出多次请求</p><h2 id="负载均衡" tabindex="-1">负载均衡 <a class="header-anchor" href="#负载均衡" aria-label="Permalink to &quot;负载均衡&quot;">​</a></h2><p>通常，具有一定规模的服务由多台服务器组成，DNS 服务器可以循环返回这些 IP 地址从而实现负载均衡</p><h2 id="为何基于-udp-协议" tabindex="-1">为何基于 UDP 协议 <a class="header-anchor" href="#为何基于-udp-协议" aria-label="Permalink to &quot;为何基于 UDP 协议&quot;">​</a></h2><p>UDP 相比 TCP 具有更高的效率</p><ul><li>UDP 无连接，无需三次握手</li><li>使用 UDP 可以降低服务器开销和网络流量</li></ul><p>DNS 解析要求的是快，加上 DNS 服务器网络通常比较稳定，故基于 UDP 具有更好的效率</p><p>注意：当报文长度超过 512 字节时，应当转为 TCP 进行传输</p><ul><li>客户端认为响应包超过 512 字节时，应主动转为 TCP 协议</li><li>服务端发现相应包超过 512 字节时，在截断 UDP 响应报文中将 TC 设为 1，客户端受到后再次发起一次 TCP 请求</li></ul>`,20),p=[o];function e(c,i,D,r,y,C){return l(),a("div",null,p)}const f=s(t,[["render",e]]);export{F as __pageData,f as default};
