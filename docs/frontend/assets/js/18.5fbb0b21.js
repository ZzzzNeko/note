(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{294:function(_,v,t){"use strict";t.r(v);var l=t(10),a=Object(l.a)({},(function(){var _=this,v=_._self._c;return v("ContentSlotsDistributor",{attrs:{"slot-key":_.$parent.slotKey}},[v("h1",{attrs:{id:"网络原理"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#网络原理"}},[_._v("#")]),_._v(" 网络原理")]),_._v(" "),v("h2",{attrs:{id:"网络模型"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#网络模型"}},[_._v("#")]),_._v(" 网络模型")]),_._v(" "),v("ul",[v("li",[_._v("应用层")]),_._v(" "),v("li",[_._v("传输层")]),_._v(" "),v("li",[_._v("网络层")]),_._v(" "),v("li",[_._v("链路层")])]),_._v(" "),v("h2",{attrs:{id:"tcp"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#tcp"}},[_._v("#")]),_._v(" TCP")]),_._v(" "),v("h3",{attrs:{id:"三次握手"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#三次握手"}},[_._v("#")]),_._v(" 三次握手")]),_._v(" "),v("ol",[v("li",[_._v("请求方 -- SYN --\x3e 响应方；请求方进入 SYN_SEND 状态")]),_._v(" "),v("li",[_._v("响应方(接收 SYN) -- ACK + SYN --\x3e 请求方；响应方进入 SYN_RECV 状态")]),_._v(" "),v("li",[_._v("请求方(接收 ACK + SYN) -- ACK --\x3e 响应方；请求方进入 ESTABLISHED 状态")])]),_._v(" "),v("h3",{attrs:{id:"四次挥手"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#四次挥手"}},[_._v("#")]),_._v(" 四次挥手")]),_._v(" "),v("ol",[v("li",[_._v("请求方 -- FIN --\x3e 响应方；请求方不再发送数据，进入 FIN_WAIT_1 状态")]),_._v(" "),v("li",[_._v("响应方(接收 FIN) -- ACK --\x3e 请求方；\n"),v("ul",[v("li",[_._v("响应方进入 CLOSE_WAIT 状态")]),_._v(" "),v("li",[_._v("请求方(接收 ACK) 进入 FIN_WAIT_2 状态")])])]),_._v(" "),v("li",[_._v("响应方(数据发送完) -- FIN --\x3e 请求方；响应方进入 LAST_ACT 状态")]),_._v(" "),v("li",[_._v("请求方(接收 FIN) -- ACK --\x3e 响应方；请求方进入 TIME_WAIT 状态\n"),v("ul",[v("li",[_._v("响应方(接收 ACK) 进入 CLOSED 状态")]),_._v(" "),v("li",[_._v("请求方(经过最大生存期后)进入 CLOSED 状态")])])])]),_._v(" "),v("p",[_._v("说明：第二次和第三次可以合并发送")]),_._v(" "),v("h3",{attrs:{id:"重传机制"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#重传机制"}},[_._v("#")]),_._v(" 重传机制")]),_._v(" "),v("p",[_._v("在发送报文时会开启定时器并保留副本")]),_._v(" "),v("ul",[v("li",[_._v("在定时器时间内接收到响应则取消定时器并删除副本")]),_._v(" "),v("li",[_._v("在超出定时器时间外会重置定时器并重新发送报文")]),_._v(" "),v("li",[_._v("一般超时重传时间取 加权平均往返时间 + 4 倍加权平均往返偏差时间")])]),_._v(" "),v("h3",{attrs:{id:"滑动窗口"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#滑动窗口"}},[_._v("#")]),_._v(" 滑动窗口")]),_._v(" "),v("p",[_._v("发送方和接收方分别维护发送窗口和接收窗口")]),_._v(" "),v("ul",[v("li",[_._v("发送窗口按序号发送帧，直到全部帧处于待确认状态")]),_._v(" "),v("li",[_._v("接收窗口按序号接收帧，接收后发送确认帧后滑动窗口")]),_._v(" "),v("li",[_._v("发送窗口接收到确认帧，删除重发表对应帧后滑动窗口")])]),_._v(" "),v("p",[_._v("根据发送窗口和接收窗口的大小分为")]),_._v(" "),v("ul",[v("li",[_._v("停等协议：发送窗口=1，接收窗口=1；需要不断等待应答，效率低下")]),_._v(" "),v("li",[_._v("后退 n 协议：发送窗口>1，接收窗口=1；重传时需要后退到错误帧并重传")]),_._v(" "),v("li",[_._v("选择重传协议：发生窗口>1，接收窗口>1；传输效率较高，需要接收方具有足够的缓冲空间")])]),_._v(" "),v("h3",{attrs:{id:"拥塞控制"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#拥塞控制"}},[_._v("#")]),_._v(" 拥塞控制")]),_._v(" "),v("ol",[v("li",[_._v("慢启动：给定一个初始 cwnd，每次收到确认包时大小翻倍，直到达到 ssthresh 或丢包")]),_._v(" "),v("li",[_._v("拥塞避免：cwnd 达到 ssthresh 时，采用线增积减的反馈机制控制 cwnd 大小\n"),v("ul",[v("li",[_._v("若网络良好，则每经过一个 RTT ，cwnd 与 ssthresh += 1MSS")]),_._v(" "),v("li",[_._v("若网络拥塞，则 ssthresh 减半，cwnd 置为 1MSS，进入慢启动阶段")])])]),_._v(" "),v("li",[_._v("快速重传：当发送方收到 4 次相同的确认时，忽略超时计时器并立即重发，进入快速恢复阶段")]),_._v(" "),v("li",[_._v("快速恢复：发送方将 cwnd 与 ssthresh 减半，进入拥塞避免阶段")])]),_._v(" "),v("p",[_._v("说明：")]),_._v(" "),v("ul",[v("li",[_._v("MSS: 最大分段大小，拥塞窗口的大小单位")]),_._v(" "),v("li",[_._v("cwnd: 拥塞窗口，每次发送数据包的大小，由发送方维护")]),_._v(" "),v("li",[_._v("ssthresh: 慢开始门限，控制拥塞窗口的最大值")])]),_._v(" "),v("h2",{attrs:{id:"udp"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#udp"}},[_._v("#")]),_._v(" UDP")]),_._v(" "),v("div",{staticClass:"language-code extra-class"},[v("pre",{pre:!0,attrs:{class:"language-text"}},[v("code",[_._v("<源端口号><目的端口>\n<报文长度><报文校验码>\n<数据内容>\n")])])]),v("p",[_._v("特点：报文结构简单，开销低，传输效率高；传输时不建立连接，无状态、不可靠")]),_._v(" "),v("p",[_._v("用途：DNS，广播，及时通话")]),_._v(" "),v("h2",{attrs:{id:"dns"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#dns"}},[_._v("#")]),_._v(" DNS")]),_._v(" "),v("p",[_._v("域名系统时将域名与 IP 地址相互映射的分布式数据库")]),_._v(" "),v("p",[_._v("域名解析流程")]),_._v(" "),v("ul",[v("li",[_._v("静态映射：通过本地缓存或配置进行查询\n"),v("ol",[v("li",[_._v("客户端缓存")]),_._v(" "),v("li",[_._v("本地 host")]),_._v(" "),v("li",[_._v("本地 DNS 缓存")]),_._v(" "),v("li",[_._v("本地 DNS 服务器")])])]),_._v(" "),v("li",[_._v("动态映射：通过其他域名服务器进行查询\n"),v("ol",[v("li",[_._v("跟域名服务器")]),_._v(" "),v("li",[_._v("顶级域名服务器")]),_._v(" "),v("li",[_._v("权威域名服务器")])])])]),_._v(" "),v("p",[_._v("DNS 基于 UDP 协议实现，理由如下")]),_._v(" "),v("ul",[v("li",[_._v("DNS 解析发生在数据传输之前，追求快速")]),_._v(" "),v("li",[_._v("DNS 解析报文简单，域名服务器相对稳定")])]),_._v(" "),v("p",[_._v("注：当报文超过 512 字节时，应当转为 TCP 进行查询")]),_._v(" "),v("h2",{attrs:{id:"http"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#http"}},[_._v("#")]),_._v(" HTTP")]),_._v(" "),v("h3",{attrs:{id:"基本内容"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#基本内容"}},[_._v("#")]),_._v(" 基本内容")]),_._v(" "),v("p",[_._v("报文格式")]),_._v(" "),v("ul",[v("li",[_._v("请求报文\n"),v("ul",[v("li",[_._v("请求行：方法 地址 协议")]),_._v(" "),v("li",[_._v("请求头")]),_._v(" "),v("li",[_._v("空行")]),_._v(" "),v("li",[_._v("请求体")])])]),_._v(" "),v("li",[_._v("响应报文\n"),v("ul",[v("li",[_._v("状态行(协议 状态)")]),_._v(" "),v("li",[_._v("响应头")]),_._v(" "),v("li",[_._v("恐慌")]),_._v(" "),v("li",[_._v("响应体")])])])]),_._v(" "),v("p",[_._v("请求方法：GET POST PUT PATCH DELETE OPTIONS HEAD TRACE CONNECT")]),_._v(" "),v("p",[_._v("状态码")]),_._v(" "),v("ul",[v("li",[_._v("1xx：消息类通知")]),_._v(" "),v("li",[_._v("2xx：成功类通知")]),_._v(" "),v("li",[_._v("3xx：重定向通知；301-永久重定向，302-临时重定向，304-命中协商缓存")]),_._v(" "),v("li",[_._v("4xx：客户端错误；400-请求错误，401-用户未认证，403-请求被拒绝，404-资源不存在")]),_._v(" "),v("li",[_._v("5xx：服务端错误：500-服务器异常，502-网关错误，504-网关超时")])]),_._v(" "),v("h3",{attrs:{id:"http1-x"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#http1-x"}},[_._v("#")]),_._v(" HTTP1.x")]),_._v(" "),v("p",[_._v("传输特点")]),_._v(" "),v("ul",[v("li",[_._v("持久连接：设置 "),v("code",[_._v("Connection: Keep-Alive")]),_._v("开启")]),_._v(" "),v("li",[_._v("管道机制")]),_._v(" "),v("li",[_._v("断点续传")]),_._v(" "),v("li",[_._v("虚拟网络")])]),_._v(" "),v("p",[_._v("存在问题")]),_._v(" "),v("ul",[v("li",[_._v("明文传输：可以被窃听、篡改、冒充")]),_._v(" "),v("li",[_._v("性能浪费：由 持久连接 导致占用服务器资源")]),_._v(" "),v("li",[_._v("对头阻塞：由 管道机制 导致有序请求阻塞时整列请求受阻")])]),_._v(" "),v("h3",{attrs:{id:"https"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#https"}},[_._v("#")]),_._v(" HTTPS")]),_._v(" "),v("p",[_._v("HTTPS = HTTP + SSL/TLS")]),_._v(" "),v("p",[_._v("SSL/TLS 进行了以下处理")]),_._v(" "),v("ul",[v("li",[_._v("信息加密，避免窃听")]),_._v(" "),v("li",[_._v("信息校验，避免篡改")]),_._v(" "),v("li",[_._v("证书校验，避免冒充")])]),_._v(" "),v("p",[_._v("工作流程")]),_._v(" "),v("ol",[v("li",[_._v("客户端 -- client hello --\x3e 服务端")]),_._v(" "),v("li",[_._v("服务端 -- 证书(公钥) --\x3e 客户端")]),_._v(" "),v("li",[_._v("客户端(获取证书公钥) -- 公钥加密信息 --\x3e 服务端")]),_._v(" "),v("li",[_._v("服务端(私钥解密信息) -- 生成会话密钥 --\x3e 客户端")]),_._v(" "),v("li",[_._v("后续服务端与客户端使用会话密钥进行加密解密通信(对称加密)")])]),_._v(" "),v("h3",{attrs:{id:"http2"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#http2"}},[_._v("#")]),_._v(" HTTP2")]),_._v(" "),v("ul",[v("li",[_._v("二进制分帧")]),_._v(" "),v("li",[_._v("请求优先级")]),_._v(" "),v("li",[_._v("头部压缩")]),_._v(" "),v("li",[_._v("多路复用：解决 对头阻塞 问题")]),_._v(" "),v("li",[_._v("服务端推送")])])])}),[],!1,null,null,null);v.default=a.exports}}]);